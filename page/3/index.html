<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.5.1"/>


    <meta name="description" content="编码计算、架构技术、服务器技术、云计算技术、挖掘机技术...." />



  <meta name="keywords" content="编程,写作,体验" />





  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.1" />


<meta name="description" content="编码计算、架构技术、服务器技术、云计算技术、挖掘机技术....">
<meta property="og:type" content="website">
<meta property="og:title" content="大后端">
<meta property="og:url" content="http://www.dahouduan.com/page/3/index.html">
<meta property="og:site_name" content="大后端">
<meta property="og:description" content="编码计算、架构技术、服务器技术、云计算技术、挖掘机技术....">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="大后端">
<meta name="twitter:description" content="编码计算、架构技术、服务器技术、云计算技术、挖掘机技术....">


<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: 'Mist',
    sidebar: 'post'
  };
</script>

  <title> 大后端 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  

  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?74a54215aac26eec91b8c5fe54a20033";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand" rel="start">
      <span class="logo">
        <i class="icon-next-logo"></i>
      </span>
      <span class="site-title">大后端</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon icon-next-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            <i class="menu-item-icon icon-next-archives"></i> <br />
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            <i class="menu-item-icon icon-next-tags"></i> <br />
            标签
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content"> 
  <section id="posts" class="posts-expand">
    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/02/09/the-meaning-of-life/" itemprop="url">
                谈人生的意义
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-02-09T21:49:11+08:00" content="2015-02-09">
            2015-02-09
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/02/09/the-meaning-of-life/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/02/09/the-meaning-of-life/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>在各个地方都看到过讨论人生的意义是什么。我也想过很多，有时候经常想着把自己带的很消沉，从冰冷的科学角度来讲，人类不过是各种元素组成的能够做能量转换的生物机器。没错它和花草树木没什么区别，一场大火可以夺取一片树木的生命，同样可以夺取一群人的生命。</p>
<p>人生是没有意义的.<br>不论你最初是英俊潇洒，还是丑陋不堪最后都会变成一具尸骨.<br>不论你最初是家财万贯，还是穷困潦倒最后一个硬币都带不走.</p>
<p>没错，人类的活动只不过是上帝在玩游戏<br>无论你是有多么的强大，终是逃不脱这游戏规则。</p>
<p>游戏的规则是什么？<br>1.事物都是有两面性的<br>有开始就有结束<br>有光亮就有阴影<br>有相聚就有分离</p>
<p>马哲里面有这个观点，中国古代的太极理论里也是这个.</p>
<p>2.no pain no gain<br>是的，没有付出就没有回报<br>如果你想跑步，你就得用力迈开双腿,因为没有人腿不动就能跑起来。<br>如果你想不饿死，你就得吃饭，因为能量守恒，人是一个能量转换装置，没有输入了，哪来的能量供你呼吸，血液循环。</p>
<p>这里重点说第二条，因为这个跟人生的意义关系很大，no pain no gain 反过来就是 no gain no pain，没错，如果你什么都不想 gain，那你<br>就用不着 pain 了，这样你就什么都不用做了，你可以静静的躲在一个角落里，等待自己慢慢消亡，也可以选择在高楼上，掀起窗户终身一跃，这很正常，<br>好多人都选择这么做了（我指得是哪些在清醒状态下的人，而不是那些得了心理疾病的人），我很尊重也理解这些人的选择，人要追随自己的内心. <strong> 但是, 如果你不甘心就这样消逝，如果你的内心还有对未来的憧憬，对亲友的依恋，那么请接受你当下的一切，默默的，一点一点的努力去，实现你的憧憬，且不要放弃。当然放弃了也没有关系，只要你在你临终时对当时的放弃不感到悔恨就好。 </strong> ，谁都不想带着遗憾离开，游戏的玩家都想在游戏结束的时候自己是 winner，然而根据游戏规则的第一条，有 winner 就有 loser，但是上帝一开始不会告诉我们谁是 winner 谁是 loser，我们需要自己去验证，这就是努力的意义，当你在游戏结束时，如果你输了，你要想原来我是loser，但是我已经尽力了。</p>
<p>所以，人生的意义就是实现内心对未来的憧憬，你想过什么样的生活，想成为什么样的人，这些画面你可以在自己的脑海中构建，然后一点点去实现它，在这途中一定会历经艰险，因为根据第二条规则，no pain no gain，既然你想 gain，那么经历 pain 是必须的。</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/02/09/no-pain-no-gain/" itemprop="url">
                No pain no gain
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-02-09T21:41:17+08:00" content="2015-02-09">
            2015-02-09
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/02/09/no-pain-no-gain/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/02/09/no-pain-no-gain/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>no pain no gain<br>我们有各种各样想 gain 的东西，这些东西驱使我们承受 pain<br>想要有多大的成就就要经历多大的艰难，<br>要有多大的赞美就要经得住多大的诋毁.</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/02/05/c-quick-sort/" itemprop="url">
                C 语言快速排序算法
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-02-05T23:30:26+08:00" content="2015-02-05">
            2015-02-05
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/02/05/c-quick-sort/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/02/05/c-quick-sort/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>快速排序法的c语言实现，下面的代码包含了正序与逆序的实现，<br>代码如下:</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span>
<span class="function"><span class="keyword">int</span> <span class="title">print_array</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[])</span></span>{
    <span class="keyword">int</span> i;    
    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++){
        <span class="built_in">printf</span>(<span class="string">"%4d"</span>, <span class="built_in">array</span>[i]);
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}

<span class="function"><span class="keyword">int</span> <span class="title">quick_sort</span><span class="params">(<span class="keyword">int</span> s[], <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span></span>{
    <span class="keyword">if</span>(left &lt; right) {
        <span class="keyword">int</span> i = left;
        <span class="keyword">int</span> j = right;
        <span class="keyword">int</span> x = s[left];

        <span class="keyword">while</span>(i &lt; j) {
            <span class="keyword">while</span>(i &lt; j &amp;&amp; s[j] &gt;= x) 
                j--;
            <span class="keyword">if</span>(i &lt; j) {
                s[i] = s[j];
                i++;
            }
            <span class="keyword">while</span>(i &lt; j &amp;&amp; s[i] &lt; x) 
                i++;
            <span class="keyword">if</span>(i &lt; j) {
                s[j] = s[i];
                j--;
            }
        }
        s[i] = x;
        quick_sort(s, left, i - <span class="number">1</span>);
        quick_sort(s, i + <span class="number">1</span>, right);
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}

<span class="function"><span class="keyword">int</span> <span class="title">quick_sort_reverse</span><span class="params">(<span class="keyword">int</span> s[], <span class="keyword">int</span> left, <span class="keyword">int</span> right)</span></span>{
    <span class="keyword">if</span>(left &lt; right) {
        <span class="keyword">int</span> i = left;
        <span class="keyword">int</span> j = right;
        <span class="keyword">int</span> x = s[left];

        <span class="keyword">while</span>(i &lt; j) {
            <span class="keyword">while</span>(i &lt; j &amp;&amp; s[j] &lt;= x) 
                j--;
            <span class="keyword">if</span>(i &lt; j) {
                s[i] = s[j];
                i++;
            }
            <span class="keyword">while</span>(i &lt; j &amp;&amp; s[i] &gt; x) 
                i++;
            <span class="keyword">if</span>(i &lt; j) {
                s[j] = s[i];
                j--;
            }
        }
        s[i] = x;
        quick_sort_reverse(s, left, i - <span class="number">1</span>);
        quick_sort_reverse(s, i + <span class="number">1</span>, right);
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}


<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>{
    <span class="keyword">int</span> <span class="built_in">array</span>[<span class="number">10</span>] = {<span class="number">49</span>, <span class="number">38</span>, <span class="number">65</span>, <span class="number">97</span>, <span class="number">48</span>, <span class="number">13</span>, <span class="number">27</span>, <span class="number">11</span>, <span class="number">56</span>, <span class="number">45</span>};
    <span class="keyword">int</span> maxlen = <span class="keyword">sizeof</span>(<span class="built_in">array</span>)/<span class="keyword">sizeof</span>(<span class="keyword">int</span>);

    print_array(<span class="built_in">array</span>);
    <span class="built_in">printf</span>(<span class="string">"\n"</span>);
    quick_sort(<span class="built_in">array</span>, <span class="number">0</span>, maxlen - <span class="number">1</span>);
    print_array(<span class="built_in">array</span>);
    <span class="built_in">printf</span>(<span class="string">"\n"</span>);
    quick_sort_reverse(<span class="built_in">array</span>, <span class="number">0</span>, maxlen - <span class="number">1</span>);
    print_array(<span class="built_in">array</span>);
    <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/01/23/how-to-do-something-in-comfort/" itemprop="url">
                如何舒适的做一件事情
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-01-23T16:34:41+08:00" content="2015-01-23">
            2015-01-23
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/01/23/how-to-do-something-in-comfort/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/01/23/how-to-do-something-in-comfort/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>如何舒适的做一件事情？<br>你有没有经常的正在开心的做一件事情的时候，被某些自身的或者外界的事情所干扰，进而影响了你的心情，以至于没办法再开心的继续，或者忍着不适继续。</p>
<p>生活应该舒适。</p>
<p>然而实中我们总是被各种各样的事务所困扰<br>看书的时候，突然感觉口渴了，手边却没有水，但是要喝水得自己去倒，甚至还没有现成的开水可以喝，这样比较懒一点的朋友（比如我）就会选择惹着渴继续看下去。。</p>
<p>当你正在行行云流水得写代码的时候突然某人突然用 QQ 给你发了个弹窗，这是要闹哪样！！！</p>
<p>当你早上要出门上班，突然发现手机找不到了，然后在床上，杂物里翻江倒海，一天的好心情分分钟就被耗光了</p>
<p>生活需要舒适。</p>
<p>然而生活中的不舒适真是太多了。</p>
<p>当然了生活由一件又一件的小事组成。</p>
<p>每个人喜欢做的事情是不一样的,但是有些事情是每个人必须做的,比如吃饭 睡觉 上wc</p>
<p>生活中的事情有些看似很复杂，其实都很简单，每件复杂的事情都是由一件又一件的小事组成的，如果一把一件事情进行步骤分解，其实每一步该怎么做基本上傻瓜都知道的。</p>
<p>所以如何舒适的做一件事情，就是你就需要把事情分解，然后把每个步骤都准备好，如果是很在意的事，你甚至可以做 PlanB</p>
<p>比如我想舒的看书一小时，ok，我们把舒适的看书一小时分解下，看书是人与外界的交互。所以我们先分成人和外界两个部分</p>
<p>人的方面首先分生理方面：首先要保证在这一个小时里，不能上 wc，所以看之前先去一趟，一小时很可能会口渴，所以手边备一大杯水吧。然后选个舒适的地方，沙发上？藤椅上？那里舒服去那里。一小时内眼睛会不会有不适，所以看书前不要看电视剧，看电脑什么的，这是最好。心里方面：要保持无欲无求的放空状态，把心里的心事先倒出来。</p>
<p>然后看外界的方面，最好是独处一室，家里安静的时候，门关上，如果 mate 突然进来粘你就不好了，手机开飞行模式</p>
<p>好了这样看来基本是无虞了，什么万一要是地震怎么办，，，，这个就只能听天由命了，总之你能控制的都控制到了，其他的只能看运气了。</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/01/21/linux-mu-lu-fu-gai/" itemprop="url">
                linux 目录覆盖命令
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-01-21T18:27:49+08:00" content="2015-01-21">
            2015-01-21
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/01/21/linux-mu-lu-fu-gai/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/01/21/linux-mu-lu-fu-gai/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>将 b 目录下的内容覆盖到 a 目录，如果有重名则跳过<br>echo no |cp  -rf b/* a/ &gt; /dev/null  2&gt;&amp;1</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/01/19/The-c-programming-language-1-9/" itemprop="url">
                C 程序设计语言 习题 1-9 答案
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-01-19T11:43:05+08:00" content="2015-01-19">
            2015-01-19
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/01/19/The-c-programming-language-1-9/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/01/19/The-c-programming-language-1-9/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>c程序设计语言习题 1-9<br>问题: 编写一个将输入复制到输出的程序,并将其中连续的多个空格用一个空格来代替<br>我的答案:</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span>

<span class="preprocessor">#<span class="keyword">define</span> CHAR <span class="string">' '</span></span>
<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>
</span>{
    <span class="keyword">int</span> c, i=<span class="number">0</span>;
    <span class="keyword">while</span>((c = getchar()) != EOF)
        <span class="keyword">if</span> (c == CHAR) {
            ++i;
        } <span class="keyword">else</span> <span class="keyword">if</span>(c != CHAR &amp;&amp; i&gt;<span class="number">0</span>) {
            <span class="built_in">putchar</span>(CHAR);
            <span class="built_in">putchar</span>(c);
            i = <span class="number">0</span>;
        } <span class="keyword">else</span>
            <span class="built_in">putchar</span>(c);
}
</code></pre><p>书上的答案（if 实现）:</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span>

<span class="preprocessor">#<span class="keyword">define</span> NONBLANK <span class="string">'a'</span> </span>
<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>
</span>{
    <span class="keyword">int</span> c, lastc;
    lastc = NONBLANK;
    <span class="keyword">while</span> ((c = getchar()) != EOF) {
        <span class="keyword">if</span> (c != <span class="string">' '</span>) 
            <span class="built_in">putchar</span>(c);
        <span class="keyword">if</span> (c == <span class="string">' '</span>)
            <span class="keyword">if</span> (lastc != <span class="string">' '</span>)
                <span class="built_in">putchar</span>(c);
        lastc = c;
    }
}
</code></pre><p>书上的答案（逻辑运算符 ||  实现）:</p>
<pre><code><span class="preprocessor">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span>

<span class="preprocessor">#<span class="keyword">define</span> NONBLANK <span class="string">'a'</span> </span>
<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span>
</span>{
    <span class="keyword">int</span> c, lastc;
    lastc = NONBLANK;
    <span class="keyword">while</span> ((c = getchar()) != EOF) {
        <span class="keyword">if</span>( c != <span class="string">' '</span> || lastc != <span class="string">' '</span>) 
            <span class="built_in">putchar</span>(c);
        lastc = c;
    }
}
</code></pre></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/01/15/redis-weibo-1/" itemprop="url">
                redis 微博点赞的实现
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-01-15T17:32:10+08:00" content="2015-01-15">
            2015-01-15
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/01/15/redis-weibo-1/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/01/15/redis-weibo-1/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>今天学到了一个redis的应用场景，就跟大家来分享下。<br>微博上有个点赞的功能，每一条微博都能看到是哪些人点了赞<br>用redis来实现这个功能的话，有下面几种方案</p>
<h3 id="只用hash来实现">只用hash来实现</h3><p>我先把代码写出来再解释吧：</p>
<pre><code>&lt;?php

<span class="variable">$id</span> = <span class="number">123456</span>;

<span class="variable">$userKey</span> = <span class="variable">$id</span><span class="decorator">%100</span>;
<span class="variable">$hashKey</span> = <span class="string">"w:"</span>.(<span class="variable">$id-</span><span class="variable">$id</span><span class="decorator">%100</span>)/<span class="number">100</span>;

<span class="variable">$redis</span> = new Redis;
<span class="variable">$redis-</span>&gt;connect(<span class="string">'127.0.0.1'</span>);

<span class="variable">$redis-</span>&gt;hset(<span class="variable">$hashKey</span>, <span class="variable">$userKey</span>, <span class="string">"1,2,3,4"</span>);
</code></pre><p>当点赞的用户少于50人时可以这种方式，当大于 50 人时需要用下面的方式</p>
<h3 id="用_hash_加_set_的方式">用 hash 加 set 的方式</h3><p>hash 里存 set 的 key, 代码如下</p>
<pre><code><span class="variable">$id</span> = <span class="number">123456</span>;

<span class="variable">$userKey</span> = <span class="variable">$id</span><span class="decorator">%100</span>;
<span class="variable">$hashKey</span> = <span class="string">"w:"</span>.(<span class="variable">$id-</span><span class="variable">$id</span><span class="decorator">%100</span>)/<span class="number">100</span>;
<span class="variable">$setKey</span> = <span class="string">"u:"</span>.<span class="variable">$id</span>;

<span class="variable">$redis</span> = new Redis;
<span class="variable">$redis-</span>&gt;connect(<span class="string">'127.0.0.1'</span>);

<span class="variable">$redis-</span>&gt;hset(<span class="variable">$hashKey</span>, <span class="variable">$userKey</span>, <span class="variable">$setKey</span>);

<span class="variable">$redis-</span>&gt;sAdd(<span class="variable">$setKey</span>, <span class="string">"1"</span>);
<span class="variable">$redis-</span>&gt;sAdd(<span class="variable">$setKey</span>, <span class="string">"2"</span>);
<span class="variable">$redis-</span>&gt;sAdd(<span class="variable">$setKey</span>, <span class="string">"3"</span>);
</code></pre><p>当然如果你要求点了赞的用户要按时间排序，这时候就要用到zset了</p>
<h3 id="用zset_实现">用zset 实现</h3><p>代码如下：</p>
<pre><code><span class="variable">$id</span> = <span class="number">123456</span>;

<span class="variable">$zsetKey</span> = <span class="string">"zu:"</span>.<span class="variable">$id</span>;

<span class="variable">$redis</span> = new Redis;
<span class="variable">$redis-</span>&gt;connect(<span class="string">'127.0.0.1'</span>);

<span class="variable">$redis-</span>&gt;zAdd(<span class="variable">$zsetKey</span>,microtime(<span class="literal">true</span>),<span class="string">"1"</span>); 
<span class="variable">$redis-</span>&gt;zAdd(<span class="variable">$zsetKey</span>,microtime(<span class="literal">true</span>),<span class="string">"2"</span>); 
<span class="variable">$redis-</span>&gt;zAdd(<span class="variable">$zsetKey</span>,microtime(<span class="literal">true</span>),<span class="string">"3"</span>); 
</code></pre></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/01/14/mysql-clear-duplicate-data/" itemprop="url">
                mysql 清除重复数据
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-01-14T09:37:26+08:00" content="2015-01-14">
            2015-01-14
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/01/14/mysql-clear-duplicate-data/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/01/14/mysql-clear-duplicate-data/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>假如有表 dup:</p>
<pre><code><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`dup`</span> (
  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">unsigned</span> <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,
  <span class="string">`username`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span>,
   PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)
) ;</span>
<span class="operator"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`dup`</span> <span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'nihao'</span>), (<span class="string">'2'</span>, <span class="string">'xxx'</span>), (<span class="string">'3'</span>, <span class="string">'xxx'</span>), (<span class="string">'4'</span>, <span class="string">'nihao'</span>), (<span class="string">'5'</span>, <span class="string">'nihao'</span>), (<span class="string">'6'</span>, <span class="string">'lele'</span>), (<span class="string">'7'</span>, <span class="string">'xx'</span>), (<span class="string">'8'</span>, <span class="string">'lele'</span>);</span>
</code></pre><p>执行以上 sql 创建我们的实验表,其中 username 表是有重复数据的</p>
<p>首先查询哪些数据有重复</p>
<pre><code><span class="operator">select username,<span class="keyword">count</span>(*) <span class="keyword">as</span> <span class="keyword">count</span> <span class="keyword">from</span> dup <span class="keyword">group</span> <span class="keyword">by</span> username <span class="keyword">having</span> <span class="keyword">count</span>(username)&gt; <span class="number">1</span>;</span>
</code></pre><p>查询一下这些重复数据的id</p>
<pre><code>select <span class="keyword">distinct</span>( t1.id),t1.username <span class="keyword">from</span> dup t1,dup t2 where t1.id&lt;&gt;t2.id <span class="keyword">and</span> t1.username=t2.username;
</code></pre><p><strong>下面就是去重复部分</strong></p>
<p>这时候其实你可以把上面查到的 id 存到一个文件里，然后用delete语句批量删除，（当然要保留一个，别的 id 都 delete掉）<br>或者你可以用下面语句,</p>
<pre><code><span class="operator"><span class="keyword">create</span> <span class="keyword">temporary</span> <span class="keyword">table</span> tmp_dup select * <span class="keyword">from</span> dup <span class="keyword">group</span> <span class="keyword">by</span> username <span class="keyword">having</span> <span class="keyword">count</span>(username)&gt;=<span class="number">1</span>;</span>
 <span class="operator"><span class="keyword">truncate</span> <span class="keyword">table</span> dup;</span>
<span class="operator"><span class="keyword">insert</span> <span class="keyword">into</span> dup select * <span class="keyword">from</span> tmp_dup;</span>
</code></pre><p>操作之前记得备份 dup 表。</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/01/07/linux-find/" itemprop="url">
                linux下find使用实例
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-01-07T22:17:21+08:00" content="2015-01-07">
            2015-01-07
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/01/07/linux-find/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/01/07/linux-find/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><h2 id="删除当前目录下的所有名称为_runtime-php_的文件">删除当前目录下的所有名称为 runtime.php 的文件</h2><pre><code>find ./ -name runtime.php | xargs <span class="keyword">rm</span> -<span class="literal">f</span>
</code></pre><h2 id="删除前目录下所有名为_Cache_的目录">删除前目录下所有名为 Cache 的目录</h2><pre><code>find ./ -name <span class="string">"Cache"</span> -<span class="keyword">type</span> <span class="keyword">d</span> | xagrs <span class="keyword">rm</span> -rf 
</code></pre></span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <header class="post-header">

      
      
        <h1 class="post-title" itemprop="name headline">
          
          
            
              <a class="post-title-link" href="/2015/01/07/linux-diff/" itemprop="url">
                linux下用diff来对比文件差异
              </a>
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于
          <time itemprop="dateCreated" datetime="2015-01-07T15:31:26+08:00" content="2015-01-07">
            2015-01-07
          </time>
        </span>

        

        
          
            <span class="post-comments-count">
              &nbsp; | &nbsp;
              <a href="/2015/01/07/linux-diff/#comments" itemprop="discussionUrl">
                <span class="post-comments-count ds-thread-count" data-thread-key="2015/01/07/linux-diff/" itemprop="commentsCount"></span>
              </a>
            </span>
          
        
      </div>
    </header>

    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody"><p>##对比文本文件 file1.txt 和 file2.txt 的差异并忽略空白字符</p>
<p>file1.txt:</p>
<pre><code>We become what we think <span class="keyword">about</span>.
If you cannot do great things, do small things <span class="keyword">in</span> a great way.
Logic will <span class="keyword">get</span> you <span class="keyword">from</span> A <span class="keyword">to</span> B. Imagination will take you everywhere.
There's a way <span class="keyword">to</span> do <span class="keyword">it</span> better – find <span class="keyword">it</span>.

Life isn’t <span class="keyword">about</span> getting <span class="keyword">and</span> having, <span class="keyword">it</span>’s <span class="keyword">about</span> giving <span class="keyword">and</span> being.
I attribute <span class="keyword">my</span> success <span class="keyword">to</span> this – I never gave <span class="keyword">or</span> took any excuse.
</code></pre><p>file2.txt:</p>
<pre><code>We become what we think about.
If you cannot <span class="operator"><span class="keyword">do</span> great things, <span class="keyword">do</span> small things <span class="keyword">in</span> a great way.<span class="comment">--Napoleon Hill, Motivational Writer</span>
Logic will <span class="keyword">get</span> you <span class="keyword">from</span> A <span class="keyword">to</span> B. Imagination will take you everywhere.
Life isn’<span class="keyword">t</span> about getting <span class="keyword">and</span> <span class="keyword">having</span>, it’s about giving <span class="keyword">and</span> being.
What <span class="keyword">is</span> <span class="keyword">not</span> started today <span class="keyword">is</span> <span class="keyword">never</span> finished tomorrow.
You aspire <span class="keyword">to</span> <span class="keyword">do</span> great things? <span class="keyword">Begin</span> <span class="keyword">with</span> <span class="keyword">little</span> ones
<span class="keyword">I</span> <span class="keyword">attribute</span> my <span class="keyword">success</span> <span class="keyword">to</span> this – <span class="keyword">I</span> <span class="keyword">never</span> gave <span class="keyword">or</span> took <span class="keyword">any</span> excuse.</span>
</code></pre><p>执行命令：</p>
<pre><code>diff file1<span class="class">.txt</span> file2<span class="class">.txt</span> -w
</code></pre><p>这个 -w 参数很有用，比如在 file1.txt 文件中空格是<code>\n</code> 而在 file2.txt 中换行符是 <code>\r\n</code> ,由于各种操作系统使用的换行符不一样，所以这样的情况还是经常见到的，当对比时如果没有 -w 参数，几乎整个文件完全不一样了，那样对比就没意义了，所以每次对比都记得加上 -w</p>
<p>对比结果:</p>
<pre><code><span class="number">2</span>c2
&lt; <span class="keyword">If</span> you cannot <span class="keyword">do</span> great things, <span class="keyword">do</span> small things <span class="keyword">in</span> a great way.
---
&gt; <span class="keyword">If</span> you cannot <span class="keyword">do</span> great things, <span class="keyword">do</span> small things <span class="keyword">in</span> a great way.--Napoleon Hill, Motivational Writer
<span class="number">4</span>,<span class="number">5</span>d3
&lt; There<span class="comment">'s a way to do it better – find it.</span>
&lt; 
<span class="number">6</span>a5,<span class="number">6</span>
&gt; What <span class="keyword">is</span> <span class="keyword">not</span> started today <span class="keyword">is</span> never finished tomorrow.
&gt; You aspire <span class="keyword">to</span> <span class="keyword">do</span> great things? Begin <span class="keyword">with</span> little ones
</code></pre><p>说明下：<br><code>2c2</code> 表示 第二行有改变<br><code>&lt; xxx</code> 表示左边的内容<br><code>---</code> 左右两边的分割线<br><code>&gt; yyyy</code> 表示右边的内容<br>接下来<br><code>4,5d3</code> 表示左边的4-5行在右边是没有的，或者说被删除了，d(delete)，表示删除<br>接下来<br><code>6a5,6</code> 表示右边的5-6行在左边是没有的，或者说是添加的，a(add)，表示添加</p>
<h2 id="列模式对比两个文本文件">列模式对比两个文本文件</h2><p>命令 </p>
<pre><code>diff file1<span class="class">.txt</span> file2<span class="class">.txt</span> -w -y -W <span class="number">50</span>
</code></pre><p>这样可以更直观的看到两边的不同<br><code>|</code> 表示有改变<br><code>&lt;</code> 左边有的<br><code>&gt;</code> 右边有的</p>
<p>执行下试试</p>
</span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/">&laquo;</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/4/">&raquo;</a>
  </nav>

 </div>

        

        
      </div>

      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <section class="site-overview">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="https://avatars1.githubusercontent.com/u/2910488?v=3&s=460" alt="Aron Gao" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Aron Gao</p>
        </div>
        <p class="site-description motion-element" itemprop="description">编码计算、架构技术、服务器技术、云计算技术、挖掘机技术....</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">53</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">86</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/shanhuhai" target="_blank">github</a>
              </span>
            
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner"> <div class="copyright" >
  
  &copy; &nbsp; 
  <span itemprop="copyrightYear">2015</span>
  <span class="with-love">
    <i class="icon-next-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Aron Gao</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


 </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  
  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"dahouduan"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     
  	<script src="/js/ua-parser.min.js"></script>
  	<script src="/js/hook-duoshuo.js"></script>
  

    
  
  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.1"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.1"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.5.1" id="motion.global"></script>




  <script type="text/javascript" src="/js/nav-toggle.js?v=0.4.5.1"></script>
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  

  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
      if (isMobile()) {
        FastClick.attach(document.body);
      }
    });
  </script>

  

  
  

  
  <script type="text/javascript" src="/js/lazyload.js"></script>
  <script type="text/javascript">
    $(function () {
      $("#posts").find('img').lazyload({
        placeholder: "/images/loading.gif",
        effect: "fadeIn"
      });
    });
  </script>
</body>
</html>
